<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:material="http://schemas.enisn-projects.io/dotnet/maui/uraniumui/material"
             xmlns:details="clr-namespace:IVCNetMaui.Views.Detail"
             xmlns:controls="clr-namespace:IVCNetMaui.Controls" 
             xmlns:viewModels="clr-namespace:IVCNetMaui.ViewModels.Dashboard"
             x:Class="IVCNetMaui.Views.Dashboard.HealthMonitorPage"
             x:DataType="viewModels:HealthMonitorViewModel"
             Title="HealthMonitorPage"
             BackgroundColor="{StaticResource Gray200}">
    <ContentPage.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Resources/Styles/DetailStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <DataTemplate x:Key="Header" x:DataType="material:TabItem">
                <Border StrokeThickness="0">
                    <Border.Triggers>
                        <DataTrigger TargetType="Border" Binding="{Binding IsSelected}" Value="True">
                            <Setter Property="BackgroundColor" Value="{StaticResource Gray200}"/>
                        </DataTrigger>
                        <DataTrigger TargetType="Border" Binding="{Binding IsSelected}" Value="False">
                            <Setter Property="BackgroundColor" Value="White" />
                        </DataTrigger>
                    </Border.Triggers>
                    <Label Text="{Binding Title}" HorizontalTextAlignment="Center">
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding Command}"/>
                        </Label.GestureRecognizers>
                    </Label>
                </Border>
            </DataTemplate>
            
            <DataTemplate x:Key="Process">
                <VerticalStackLayout Spacing="5" Style="{StaticResource MainPadding}">
                    <VerticalStackLayout Style="{StaticResource SectionStack}">
                        <Label Text="Status" Style="{StaticResource SectionTitle}"/>
                        <Border>
                            <Grid ColumnDefinitions="*, *"
                                  RowDefinitions="Auto, Auto, Auto"
                                  Style="{StaticResource PropertyGrid}">
                                <VerticalStackLayout>
                                    <Label Text="PID:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="8776" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Column="1">
                                    <Label Text="State:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="Running" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Row="1">
                                    <Label Text="Threads:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="21" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Column="1" Grid.Row="1">
                                    <Label Text="Handles:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="756" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Row="2">
                                    <Label Text="Exited Code:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="None" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Column="2" Grid.Row="2">
                                    <Label Text="Exited:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="None" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Border>
                    </VerticalStackLayout>
                    <Grid ColumnDefinitions="*, *"
                          ColumnSpacing="12">
                        <VerticalStackLayout Style="{StaticResource SectionStack}">
                            <Label Text="CPU" Style="{StaticResource SectionTitle}"/>
                            <Border>
                                <Grid ColumnDefinitions="*, *"
                                      Style="{StaticResource PropertyGrid}">
                                    <VerticalStackLayout>
                                        <Label Text="Total:" Style="{StaticResource PropertyTitle}"/>
                                        <Label Text="2" Style="{StaticResource PropertyValue}"/>
                                    </VerticalStackLayout>
                                    <VerticalStackLayout Grid.Column="1">
                                        <Label Text="Used:" Style="{StaticResource PropertyTitle}"/>
                                        <Label Text="4.2%" Style="{StaticResource PropertyValue}"/>
                                    </VerticalStackLayout>
                                </Grid>
                            </Border>
                        </VerticalStackLayout>
                        <VerticalStackLayout Grid.Column="1" Style="{StaticResource SectionStack}">
                            <Label Text="GPU" Style="{StaticResource SectionTitle}"/>
                            <Border>
                                <Grid ColumnDefinitions="*, *"
                                      Style="{StaticResource PropertyGrid}">
                                    <VerticalStackLayout>
                                        <Label Text="Total:" Style="{StaticResource PropertyTitle}"/>
                                        <Label Text="2" Style="{StaticResource PropertyValue}"/>
                                    </VerticalStackLayout>
                                    <VerticalStackLayout Grid.Column="1">
                                        <Label Text="Used:" Style="{StaticResource PropertyTitle}"/>
                                        <Label Text="4.2%" Style="{StaticResource PropertyValue}"/>
                                    </VerticalStackLayout>
                                </Grid>
                            </Border>
                        </VerticalStackLayout>
                    </Grid>
                    <VerticalStackLayout Style="{StaticResource SectionStack}">
                        <Label Text="Status" Style="{StaticResource SectionTitle}"/>
                        <Border>
                            <Grid ColumnDefinitions="*, *"
                                  RowDefinitions="Auto, Auto"
                                  Style="{StaticResource PropertyGrid}">
                                <VerticalStackLayout>
                                    <Label Text="Working:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="141,984 K" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Column="1">
                                    <Label Text="Peak Working:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="141,988 K" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Row="1">
                                    <Label Text="Paged:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="64,188 K" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Column="1" Grid.Row="1">
                                    <Label Text="Peak Paged:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="64,188 K" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Border>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </DataTemplate>

            <DataTemplate x:Key="System">
                <VerticalStackLayout Spacing="16" Style="{StaticResource MainPadding}">
                    <VerticalStackLayout Style="{StaticResource SectionStack}">
                        <Label Text="Status" Style="{StaticResource SectionTitle}"/>
                        <Border>
                            <Grid ColumnDefinitions="*, *"
                                  RowDefinitions="Auto, Auto"
                                  Style="{StaticResource PropertyGrid}">
                                <VerticalStackLayout>
                                    <Label Text="Name:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="WIN-JQGG2HC608K" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Column="1">
                                    <Label Text="Started:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="6/4/2025 2:38:46 PM" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Row="1">
                                    <Label Text="OS:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="Microsoft Windows NT 10.0.17763.0" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Column="1" Grid.Row="1">
                                    <Label Text="Uptime:" Style="{StaticResource PropertyTitle}"/>
                                    <Label Text="5 day 22 hr 51 min 56 sec" Style="{StaticResource PropertyValue}"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Border>
                    </VerticalStackLayout>
                    <Grid ColumnDefinitions="*, *"
                          ColumnSpacing="12">
                        <VerticalStackLayout Style="{StaticResource SectionStack}">
                            <Label Text="CPU" Style="{StaticResource SectionTitle}"/>
                            <Border>
                                <Grid ColumnDefinitions="*, *"
                                      Style="{StaticResource PropertyGrid}">
                                    <VerticalStackLayout>
                                        <Label Text="Total:" Style="{StaticResource PropertyTitle}"/>
                                        <Label Text="2" Style="{StaticResource PropertyValue}"/>
                                    </VerticalStackLayout>
                                    <VerticalStackLayout Grid.Column="1">
                                        <Label Text="Used:" Style="{StaticResource PropertyTitle}"/>
                                        <Label Text="4.2%" Style="{StaticResource PropertyValue}"/>
                                    </VerticalStackLayout>
                                </Grid>
                            </Border>
                        </VerticalStackLayout>
                        <VerticalStackLayout Grid.Column="1" Style="{StaticResource SectionStack}">
                            <Label Text="GPU" Style="{StaticResource SectionTitle}"/>
                            <Border>
                                <Grid ColumnDefinitions="*, *"
                                      Style="{StaticResource PropertyGrid}">
                                    <VerticalStackLayout>
                                        <Label Text="Total:" Style="{StaticResource PropertyTitle}"/>
                                        <Label Text="2" Style="{StaticResource PropertyValue}"/>
                                    </VerticalStackLayout>
                                    <VerticalStackLayout Grid.Column="1">
                                        <Label Text="Used:" Style="{StaticResource PropertyTitle}"/>
                                        <Label Text="4.2%" Style="{StaticResource PropertyValue}"/>
                                    </VerticalStackLayout>
                                </Grid>
                            </Border>
                        </VerticalStackLayout>
                    </Grid>
                    <VerticalStackLayout Style="{StaticResource SectionStack}">
                        <Label Text="RAM" Style="{StaticResource SectionTitle}"/>
                        <Border>
                            <VerticalStackLayout Spacing="12">
                                <controls:UsageBarControl DiskName="Physical"
                                          DiskCapacity="6.0"
                                          DiskUsage="3.6"/>
                                <controls:UsageBarControl DiskName="Virtual"
                                          DiskCapacity="6.0"
                                          DiskUsage="3.6"/>
                            </VerticalStackLayout>
                        </Border>
                    </VerticalStackLayout>
                    <VerticalStackLayout Style="{StaticResource SectionStack}">
                        <Label Text="Disks" Style="{StaticResource SectionTitle}"/>
                        <Border>
                            <VerticalStackLayout>
                                <controls:UsageBarControl DiskName="C:"
                                          DiskCapacity="6.0"
                                          DiskUsage="3.6"/>
                            </VerticalStackLayout>
                        </Border>
                    </VerticalStackLayout>
                    <VerticalStackLayout>
                        <Label Text="Network" Style="{StaticResource SectionTitle}"/>
                        <Border>
                        </Border>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </DataTemplate>
        </ResourceDictionary>
    </ContentPage.Resources>
    <material:TabView TabHeaderItemTemplate="{StaticResource Header}">
        <material:TabItem Title="System" ContentTemplate="{StaticResource System}">
        </material:TabItem>

        <material:TabItem Title="Video Process" ContentTemplate="{StaticResource Process}">
        </material:TabItem>

        <material:TabItem Title="UI Process" ContentTemplate="{StaticResource Process}">
        </material:TabItem>
    </material:TabView>
</ContentPage>